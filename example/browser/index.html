<!doctype html>
<html>
<head>
	<title>Trealla Prolog Demo</title>
	<style>
		#result {
			padding: 0.5em;
			background: #f9f9f9;
		}
		#result:empty {
			display: none;
		}
	</style>
</head>
<body>
<h2>Trealla Sandbox</h2>

<form onsubmit="return ask(), false;">
	<textarea cols=80 rows=20 id="src">
person(socrates).
mortal(X) :- person(X).
	</textarea>
	<br>
	<input type="text" style="width: 74ch" value="mortal(Who)." id="query" required>
	<input type="submit" value="Query" id="query-btn" disabled>
</form>

<h3>Results</h3>
<pre id="result"></pre>

<h3>Tinker</h3>
<button onclick="return resetProlog(),false;">Reset Interpreter</button>

<script type="module">
import { loadFromWAPM, Prolog } from 'https://esm.sh/trealla@0.3.3';

await loadFromWAPM("0.3.5");

let pl = new Prolog();

window.resetProlog = function() {
	pl = new Prolog();
}

window.ask = async function ask() {
	const query = document.getElementById("query");
	const src = document.getElementById("src");
	const result = document.getElementById("result");
	console.time("query");
	const msg = await pl.query(query.value, src.value);
	console.timeEnd("query");
	result.textContent = JSON.stringify(msg, null, "  ");
}

document.getElementById("query-btn").removeAttribute("disabled");
</script>
</body>
</html>